version: '3.9'

# https://github.com/elastic/beats/tree/master/filebeat
services:
  # https://hub.docker.com/r/elastic/filebeat
  filebeat:
    container_name: filebeat
    image: elastic/filebeat:8.7.0
    restart: unless-stopped
    user: root
    dns:
      - '1.1.1.1'
      - '1.0.0.1'
      - '2606:4700:4700::1111'
      - '2606:4700:4700::1001'
    environment:
      TZ: 'Europe/Berlin'
      ELASTICSEARCH_HOSTS: 'elasticsearch:9200'
      ELASTICSEARCH_USERNAME: 'filebeat_internal'
      ELASTICSEARCH_PASSWORD: '<ELASTICSEARCH_PASSWORD>'
    volumes:
      - /opt/docker/config-files/filebeat/filebeat.yml:/usr/share/filebeat/filebeat.yml:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
    # - /var/lib/docker/containers:/var/lib/docker/containers:ro
