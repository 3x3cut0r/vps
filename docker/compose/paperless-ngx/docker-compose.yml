version: "3.9"

# https://github.com/linuxserver/docker-paperless-ngx
services:
  # https://hub.docker.com/r/linuxserver/paperless-ngx
    paperless-ngx:
        container_name: paperless-ngx
        image: lscr.io/linuxserver/paperless-ngx
        restart: unless-stopped
        ports:
            - "2121:8000"
        networks:
            paperless-ngx:
                ipv4_address: 10.24.21.2
            redis-nopw:
                ipv4_address: 10.20.112.121
        dns:
            - 8.8.8.8
            - 8.8.4.4
            - 2001:4860:4860::8888
            - 2001:4860:4860::8844
        environment:
            TZ: "Europe/Berlin"
            PUID: "1000"
            PGID: "1000"
            REDIS_URL: "redis-nopw"
        volumes:
            - paperless-ngx-conf:/config
            - paperless-ngx-data:/data

networks:
    paperless-ngx:
        name: paperless-ngx
        ipam:
            driver: default
            config:
                - subnet: "10.24.21.0/24"
                  gateway: 10.24.21.1
    redis-nopw:
        external:
            name: redis-nopw

volumes:
    paperless-ngx-conf:
        name: paperless-ngx-conf
    paperless-ngx-data:
        name: paperless-ngx-data
