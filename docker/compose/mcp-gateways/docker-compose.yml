version: "3.9"

# For more mcp-servers (mcpo), see https://github.com/modelcontextprotocol/servers
# For more mcp-servers (docker), see https://hub.docker.com/mcp
services:
  # https://github.com/open-webui/mcpo
  mcp-time:
    container_name: mcp-time
    image: ghcr.io/open-webui/mcpo:main
    restart: unless-stopped
    command:
      ["--", "uvx", "mcp-server-time", "--local-timezone", "Europe/Berlin"]
    networks:
      mcp-gateways:
        ipv4_address: "10.24.43.10"

  # https://github.com/open-webui/mcpo
  mcp-fetch:
    container_name: mcp-fetch
    image: ghcr.io/open-webui/mcpo:main
    restart: unless-stopped
    command: ["--", "uvx", "mcp-server-fetch"]
    networks:
      mcp-gateways:
        ipv4_address: "10.24.43.11"

  # https://hub.docker.com/r/docker/mcp-gateway
  mcp-docker:
    container_name: mcp-docker
    image: docker/mcp-gateway:latest
    restart: unless-stopped
    command:
      ["--transport=streaming", "--port=8080", "--servers=dockerhub,duckduckgo"]
    networks:
      mcp-gateways:
        ipv4_address: "10.24.43.200"
    environment:
      HUB_PAT_TOKEN: "<HUB_PAT_TOKEN>" # dockerhub pat_token
    volumes:
      - /root/.docker/mcp:/root/.docker/mcp # config/secrets
      - /var/run/docker.sock:/var/run/docker.sock:ro

networks:
  mcp-gateways:
    name: mcp-gateways
    ipam:
      driver: default
      config:
        - subnet: "10.24.43.0/24"
          gateway: "10.24.43.1"
